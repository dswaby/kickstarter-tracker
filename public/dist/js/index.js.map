{"version":3,"sources":["public/js/index.js"],"names":[],"mappings":"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","file":"public/js/index.js","sourcesContent":["class KickstarterTracker {\n  constructor() {}\n  \n  init() {\n    this._render();\n    this._events();\n  }\n  \n  _render() {\n    var proxyURL = 'https://jsonp.afeld.me/?url=';\n    var kickstarterURL = 'https://www.kickstarter.com/projects/less/less-like-chess-but-less.json';\n    var url = proxyURL + encodeURIComponent(kickstarterURL);\n    \n    $.getJSON(url, d => {\n      var title = $(d.card).find('.project-title').text();\n      \n      $('.title').text(title);\n    });\n    \n    new Graph().init();\n  }\n  \n  _events() {}\n}\n\n\nclass Graph {\n  constructor() {\n    this.database = new Firebase('https://kickstarter.firebaseio.com');\n  }\n  \n  init() {\n    this._render();\n    this._events();\n  }\n  \n  _render() {\n    this._buildGraph();\n  }\n  \n  _events() {}\n  \n  _buildGraph() {\n    \n    // grab all the points available once on load\n    this.database.once('value', event => {  \n      var w = $(window).width();\n      var h = $(window).height(); \n      var data = [];\n      var newItems = false;\n      var recentKey = 0;\n      var x, y, empty, area, graph, goal, pct, money;\n      \n      function commaSeparateNumber(val){\n        while (/(\\d+)(\\d{3})/.test(val.toString())){\n          val = val.toString().replace(/(\\d+)(\\d{3})/, '$1'+','+'$2');\n        }\n        return val;\n      }\n\n      // add any new points that come in after load\n      this.database.on('value', event => { \n        var newData = [];\n\n        if (!newItems) {\n          newItems = true;\n          return;\n        }\n\n        _.each(event.val(), dataPiece => {\n          newData.push(parseInt(dataPiece.pledged, 10));\n        });\n\n        x = d3.scale.linear()\n          .domain([0, newData.length - 1])\n          .range([0, w]);\n\n        y = d3.scale.linear()\n          .domain([d3.min(newData), d3.max(newData)])\n          .range([h, 0]);\n\n        graph.selectAll('path')\n          .datum(newData)\n            .transition()\n            .duration(1000)\n            .attr('d', area); \n      });\n\n      for (var key in event.val()) {\n        let timestamp = event.val()[key];\n\n        // the keys are unix timestamps so the largest will be the \n        // most recent\n        recentKey = key > recentKey ? key : recentKey;\n\n        // push the pledged amounts into array for graph\n        data.push(parseInt(timestamp.pledged, 10)); \n      }\n\n      // current completion percent - value is given in decimal form\n      pct = parseInt(event.val()[recentKey].percentRaised * 100, 10);\n      money = event.val()[recentKey].pledged;\n\n      x = d3.scale.linear()\n        .domain([0, data.length - 1])\n        .range([0, w]);\n\n      y = d3.scale.linear()\n        .domain([d3.min(data), d3.max(data)])\n        .range([h, 0]);\n\n      // start all points at 0 so graph animates in\n      empty = d3.svg.area().interpolate('basis')\n        .x(function(d, i) { return x(i); })\n        .y0(h)\n        .y1(function(d) { return h; });\n\n      area = d3.svg.area().interpolate('basis')\n        .x(function(d, i) { return x(i); })\n        .y0(h)\n        .y1(function(d) { return y(d); });\n\n      graph = d3.select('.graph').append('svg')\n        .attr('width', w)\n        .attr('height', h);\n\n      graph.append('path')\n        .datum(data)\n          .attr('d', empty)\n          .transition()\n          .duration(1000)\n          .attr('d', area);\n\n      $('.pct-complete').each(function() {\n        $(this)\n          .prop('counter', 0)\n          .animate({\n            counter: pct\n          }, {\n            duration: 1000,\n            easing: 'swing',\n            step: now => {\n              $(this).text(parseInt(now, 10) + '%');\n            }\n        });\n      });\n\n      $('.money-raised').each(function() {\n        $(this)\n          .prop('counter', 0)\n          .animate({\n            counter: money\n          }, {\n            duration: 1000,\n            easing: 'swing',\n            step: now => {\n              $(this).text('$' + commaSeparateNumber(now.toFixed(0)));\n            }\n        });\n      });\n    });    \n  }\n}\n\nnew KickstarterTracker().init();\n\n// 'use strict';\n// var _createClass = function () {\n//     function defineProperties(target, props) {\n//         for (var i = 0; i < props.length; i++) {\n//             var descriptor = props[i];\n//             descriptor.enumerable = descriptor.enumerable || false;\n//             descriptor.configurable = true;\n//             if ('value' in descriptor)\n//                 descriptor.writable = true;\n//             Object.defineProperty(target, descriptor.key, descriptor);\n//         }\n//     }\n//     return function (Constructor, protoProps, staticProps) {\n//         if (protoProps)\n//             defineProperties(Constructor.prototype, protoProps);\n//         if (staticProps)\n//             defineProperties(Constructor, staticProps);\n//         return Constructor;\n//     };\n// }();\n// function _classCallCheck(instance, Constructor) {\n//     if (!(instance instanceof Constructor)) {\n//         throw new TypeError('Cannot call a class as a function');\n//     }\n// }\n// var KickstarterTracker = function () {\n//     function KickstarterTracker() {\n//         _classCallCheck(this, KickstarterTracker);\n//     }\n//     _createClass(KickstarterTracker, [\n//         {\n//             key: 'init',\n//             value: function init() {\n//                 this._render();\n//                 this._events();\n//             }\n//         },\n//         {\n//             key: '_render',\n//             value: function _render() {\n//                 var proxyURL = 'https://jsonp.afeld.me/?url=';\n//                 var kickstarterURL = $('body').data('kickstarter') + '.json';\n//                 var url = proxyURL + encodeURIComponent(kickstarterURL);\n//                 $.getJSON(url, function (d) {\n//                     var title = $(d.card).find('.project-title').text();\n//                     $('.title').text(title);\n//                 });\n//                 new Graph().init();\n//             }\n//         },\n//         {\n//             key: '_events',\n//             value: function _events() {\n//             }\n//         }\n//     ]);\n//     return KickstarterTracker;\n// }();\n// var Graph = function () {\n//     function Graph() {\n//         _classCallCheck(this, Graph);\n//         this.database = new Firebase('https://kickstarter.firebaseio.com');\n//     }\n//     _createClass(Graph, [\n//         {\n//             key: 'init',\n//             value: function init() {\n//                 this._render();\n//                 this._events();\n//             }\n//         },\n//         {\n//             key: '_render',\n//             value: function _render() {\n//                 this._buildGraph();\n//             }\n//         },\n//         {\n//             key: '_events',\n//             value: function _events() {\n//             }\n//         },\n//         {\n//             key: '_buildGraph',\n//             value: function _buildGraph() {\n//                 var _this = this;\n//                 this.database.once('value', function (event) {\n//                     var w = $(window).width();\n//                     var h = $(window).height();\n//                     var data = [];\n//                     var newItems = false;\n//                     var recentKey = 0;\n//                     var x, y, empty, area, graph, goal, pct, money;\n//                     function commaSeparateNumber(val) {\n//                         while (/(\\d+)(\\d{3})/.test(val.toString())) {\n//                             val = val.toString().replace(/(\\d+)(\\d{3})/, '$1' + ',' + '$2');\n//                         }\n//                         return val;\n//                     }\n//                     _this.database.on('value', function (event) {\n//                         var newData = [];\n//                         if (!newItems) {\n//                             newItems = true;\n//                             return;\n//                         }\n//                         _.each(event.val(), function (dataPiece) {\n//                             newData.push(parseInt(dataPiece.pledged, 10));\n//                         });\n//                         x = d3.scale.linear().domain([\n//                             0,\n//                             newData.length - 1\n//                         ]).range([\n//                             0,\n//                             w\n//                         ]);\n//                         y = d3.scale.linear().domain([\n//                             d3.min(newData),\n//                             d3.max(newData)\n//                         ]).range([\n//                             h,\n//                             0\n//                         ]);\n//                         graph.selectAll('path').datum(newData).transition().duration(1000).attr('d', area);\n//                     });\n//                     for (var key in event.val()) {\n//                         var timestamp = event.val()[key];\n//                         recentKey = key > recentKey ? key : recentKey;\n//                         data.push(parseInt(timestamp.pledged, 10));\n//                     }\n//                     pct = parseInt(event.val()[recentKey].percentRaised * 100, 10);\n//                     money = event.val()[recentKey].pledged;\n//                     x = d3.scale.linear().domain([\n//                         0,\n//                         data.length - 1\n//                     ]).range([\n//                         0,\n//                         w\n//                     ]);\n//                     y = d3.scale.linear().domain([\n//                         d3.min(data),\n//                         d3.max(data)\n//                     ]).range([\n//                         h,\n//                         0\n//                     ]);\n//                     empty = d3.svg.area().interpolate('basis').x(function (d, i) {\n//                         return x(i);\n//                     }).y0(h).y1(function (d) {\n//                         return h;\n//                     });\n//                     area = d3.svg.area().interpolate('basis').x(function (d, i) {\n//                         return x(i);\n//                     }).y0(h).y1(function (d) {\n//                         return y(d);\n//                     });\n//                     graph = d3.select('.graph').append('svg').attr('width', w).attr('height', h);\n//                     graph.append('path').datum(data).attr('d', empty).transition().duration(1000).attr('d', area);\n//                     $('.pct-complete').each(function () {\n//                         var _this2 = this;\n//                         $(this).prop('counter', 0).animate({ counter: pct }, {\n//                             duration: 1000,\n//                             easing: 'swing',\n//                             step: function step(now) {\n//                                 $(_this2).text(parseInt(now, 10) + '%');\n//                             }\n//                         });\n//                     });\n//                     $('.money-raised').each(function () {\n//                         var _this3 = this;\n//                         $(this).prop('counter', 0).animate({ counter: money }, {\n//                             duration: 1000,\n//                             easing: 'swing',\n//                             step: function step(now) {\n//                                 $(_this3).text('$' + commaSeparateNumber(now.toFixed(0)));\n//                             }\n//                         });\n//                     });\n//                 });\n//             }\n//         }\n//     ]);\n//     return Graph;\n// }();\n// new KickstarterTracker().init();"]}